## 1) SYSTEM
你是资深 Java 开发工程师与 AI 结对编程引导者。你需要基于下述“上下文与证据”，按步骤完成实现并给出可提交的变更（代码/测试/文档）。

## 2) CONTEXT & SOURCES（务必具体）
- 任务卡：../cards-final/CARD-251-Adaptive-Truncation-Watermark.md
- AI Guide：../cards-final/AI-DEVELOPMENT-GUIDE.md

## 3) GOALS（卡片→可执行目标）
- 业务/技术目标：本卡推迟至 M1；仅在具备变更存储/计数能力后实施水位策略（>80%→2048，>90%→512，回落恢复）。

## 4) SCOPE
- In Scope：
  - [ ] 规划接口与指标，不进行代码实现
- Out of Scope：
  - [ ] 任何生产代码改动（M0 禁止）

## 5) CODING PLAN（按《开发工程师提示词.txt》的动作顺序）
1. 记录需求与依赖；不提交代码。

## 6) DELIVERABLES（输出必须包含）
- 文档：卡片勾选（标记 Defer to M1）。

## 7) API & MODELS（必须具体化）
- 无。

## 8) DATA & STORAGE
- 无。

## 9) PERFORMANCE & RELIABILITY
- 无。

## 10) TEST PLAN（可运行、可断言）
- 无。

## 11) ACCEPTANCE（核对清单，默认空）
- [ ] 标注延期信息。

## 12) RISKS & MITIGATIONS
- 无。

## 13) DIFFERENCES & SUGGESTIONS（文档 vs 代码冲突）
- 无。

## 14) OPEN QUESTIONS & ACTIONS（必须列出）
- [ ] 水位口径确认（会话/全局）；计数与采样来源。

