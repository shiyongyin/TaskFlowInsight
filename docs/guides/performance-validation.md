# 性能验证与执行策略

本项目的性能校验采用“双轨制”以兼顾稳定性与可重复性：

## 1. CI 轻量冒烟（默认执行）
- 目标：防止明显退化，给 CI 一个温和的栅栏；
- 用例：`PerfSmokeTest`（2 字段、200 次迭代）；
- 阈值：平均 < 5ms/次（环境友好，避免抖动导致误报）；
- 执行：随 `./mvnw test` 一起运行。

## 2. perf profile 重场景（手动执行）
- 目标：验证典型负载下的 P95/P99 指标；
- 场景：
  - Baseline：2 字段；
  - 嵌套：depth=2；
  - 集合摘要：size ≈ 100；
- 验证：固定硬件/核数、统一 JVM 参数；warm-up 3–5 轮；统计 P95/P99；
- 执行：`./mvnw -Pperf test`

## 3. 目标与阈值（建议）
- Baseline（2 字段）：P95 ≤ 200μs，CPU 增量 ≤ 5%；
- 嵌套 depth=2：P95 ≤ 2ms；
- 集合摘要（~100 元素）：P95 ≤ 5ms；

> 说明：不同硬件/环境存在差异，perf profile 不在默认 CI 执行；CI 只做“轻量冒烟”。

