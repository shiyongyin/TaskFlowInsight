# v4.0.0 Provider æ¥å£æ‰©å±•è®¾è®¡æ–‡æ¡£

**ç‰ˆæœ¬**: 1.0
**æ—¥æœŸ**: 2025-10-14
**ç›®æ ‡**: å®Œæˆ 40/40 æ–¹æ³•è·¯ç”±ï¼Œå¤šç»´åº¦è¯„åˆ† â‰¥9
**çŠ¶æ€**: è®¾è®¡é˜¶æ®µ

---

## ğŸ¯ è®¾è®¡åŸåˆ™

### æ ¸å¿ƒåŸåˆ™
1. **æœ€å°æ¥å£åŸåˆ™** (ISP): Provider åªæä¾›åº•å±‚åŸå­æ“ä½œ
2. **æ— æ³„æ¼æŠ½è±¡** (LoD): ä¸æš´éœ² TFI å±‚çš„å®ç°ç»†èŠ‚
3. **å¼€æ”¾å°é—­åŸåˆ™** (OCP): å¯æ‰©å±•ï¼Œä¸ä¿®æ”¹ç°æœ‰æ–¹æ³•
4. **ä¾èµ–å€’ç½®** (DIP): ä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å…·ä½“å®ç°

### è®¾è®¡çº¦æŸ
- âŒ ç¦æ­¢å¾ªç¯ä¾èµ– (Provider â†’ TFI)
- âŒ ç¦æ­¢æš´éœ²å†…éƒ¨ç±» (TaskContext, StageFunction)
- âœ… å…è®¸ JDK æ ‡å‡†ç±»å‹ (Runnable, Callable, List)
- âœ… ä¿æŒå‘åå…¼å®¹ (default methods for new features)

---

## ğŸ“Š æ–¹æ³•è·¯ç”±åˆ†æ

### å½“å‰çŠ¶æ€ (v4.0.0-phase1)
âœ… **å·²è·¯ç”± 15 ä¸ªæ–¹æ³•**:
- Comparison (2): compare, render
- Tracking (3): track, getChanges, clearAllTracking
- Flow (10): startSession, endSession, start, stop, messageÃ—2, errorÃ—2, getCurrentSession, getCurrentTask

### å¾…è·¯ç”±æ–¹æ³•åˆ†ç±»

#### åˆ†ç±» A: éœ€è¦ Provider æ”¯æŒ (18 ä¸ª)

**FlowProvider æ‰©å±• (+2 æ–¹æ³•)**:
1. `void clear()` - æ¸…ç©ºå½“å‰ä¸Šä¸‹æ–‡
   - åŸå› : ä¸åŒå®ç°æœ‰ä¸åŒæ¸…ç†é€»è¾‘
   - å¤æ‚åº¦: LOW
   - ç ´åæ€§: æ—  (ä½¿ç”¨ default method)

2. `List<TaskNode> getTaskStack()` - è·å–ä»»åŠ¡æ ˆ
   - åŸå› : éœ€è¦è®¿é—®å†…éƒ¨ä»»åŠ¡æ ‘ç»“æ„
   - å¤æ‚åº¦: LOW
   - ç ´åæ€§: æ— 

**TrackingProvider æ‰©å±• (+8 æ–¹æ³•)**:
3. `void trackAll(Map<String, Object>)` - æ‰¹é‡è¿½è¸ª
4. `void trackDeep(String, Object)` - æ·±åº¦è¿½è¸ª
5. `void trackDeep(String, Object, TrackingOptions)` - å¸¦é€‰é¡¹æ·±åº¦è¿½è¸ª
6. `List<ChangeRecord> getAllChanges()` - è·å–æ‰€æœ‰å˜æ›´ï¼ˆè·¨ä¼šè¯ï¼‰
7. `void startTracking(String)` - å¼€å§‹è¿½è¸ªä¼šè¯
8. `void recordChange(...)` - æ‰‹åŠ¨è®°å½•å˜æ›´
9. `void clearTracking(String)` - æ¸…é™¤æŒ‡å®šä¼šè¯è¿½è¸ª
10. `void withTracked(String, Object, Runnable, String...)` - ä½œç”¨åŸŸè¿½è¸ª

**ExportProvider æ–°å»º (+4 æ–¹æ³•)**:
11. `void exportToConsole()` - æ§åˆ¶å°å¯¼å‡º
12. `boolean exportToConsole(boolean)` - æ§åˆ¶å°å¯¼å‡ºï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰
13. `String exportToJson()` - JSON å¯¼å‡º
14. `Map<String, Object> exportToMap()` - Map å¯¼å‡º

**RenderProvider æ‰©å±• (+4 æ–¹æ³•)**:
15. `String renderChanges(List<ChangeRecord>)` - æ¸²æŸ“å˜æ›´åˆ—è¡¨
16. `String renderSession(Session)` - æ¸²æŸ“ä¼šè¯
17. `String renderTask(TaskNode)` - æ¸²æŸ“å•ä¸ªä»»åŠ¡
18. `String renderTaskTree(TaskNode)` - æ¸²æŸ“ä»»åŠ¡æ ‘

#### åˆ†ç±» B: TFI å±‚å°è£…ï¼Œæ— éœ€ Provider (7 ä¸ª)
- `enable()` - å…¨å±€é…ç½®
- `disable()` - å…¨å±€é…ç½®
- `isEnabled()` - å…¨å±€é…ç½®
- `stage(String)` - åˆ«åæ–¹æ³• (å¤ç”¨ start)
- `stage(String, StageFunction)` - try-with-resources å°è£…
- `run(String, Runnable)` - try-with-resources å°è£…
- `call(String, Callable)` - try-with-resources å°è£…
- `comparator()` - Builder å·¥å‚æ–¹æ³•
- `trackingOptions()` - Builder å·¥å‚æ–¹æ³•
- `setChangeTrackingEnabled()` - é…ç½®æ–¹æ³•
- `isChangeTrackingEnabled()` - é…ç½®æ–¹æ³•

---

## ğŸ¨ æ¥å£è®¾è®¡

### 1. FlowProvider æ‰©å±•

```java
public interface FlowProvider {

    // ========== ç°æœ‰æ–¹æ³• (v4.0.0-phase1) ==========
    String startSession(String name);
    void endSession();
    TaskNode startTask(String name);
    void endTask();
    Session currentSession();
    TaskNode currentTask();
    void message(String content, String label);
    default int priority() { return 0; }

    // ========== æ–°å¢æ–¹æ³• (v4.0.0-phase2) ==========

    /**
     * æ¸…ç©ºå½“å‰çº¿ç¨‹çš„æ‰€æœ‰ä¸Šä¸‹æ–‡ï¼ˆä¼šè¯+ä»»åŠ¡æ ˆï¼‰
     *
     * <p>å®ç°æ³¨æ„äº‹é¡¹ï¼š
     * <ul>
     *   <li>å…³é—­å½“å‰ä¼šè¯ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</li>
     *   <li>æ¸…ç©ºä»»åŠ¡æ ˆ</li>
     *   <li>é‡Šæ”¾ ThreadLocal èµ„æº</li>
     *   <li>å¼‚å¸¸å®‰å…¨ï¼šæ•è·æ‰€æœ‰å¼‚å¸¸</li>
     * </ul>
     *
     * @since 4.0.0
     */
    default void clear() {
        // é»˜è®¤å®ç°ï¼šå…ˆç»“æŸæ‰€æœ‰ä»»åŠ¡ï¼Œå†ç»“æŸä¼šè¯
        try {
            // æ³¨æ„ï¼šå­ç±»åº”è¯¥æä¾›æ›´é«˜æ•ˆçš„å®ç°
            while (currentTask() != null) {
                endTask();
            }
            if (currentSession() != null) {
                endSession();
            }
        } catch (Exception e) {
            // é»˜è®¤å®ç°å¿½ç•¥å¼‚å¸¸
        }
    }

    /**
     * è·å–å½“å‰çº¿ç¨‹çš„ä»»åŠ¡æ ˆï¼ˆä»æ ¹ä»»åŠ¡åˆ°å½“å‰ä»»åŠ¡ï¼‰
     *
     * <p>è¿”å›åˆ—è¡¨é¡ºåºï¼šstack[0] = æ ¹ä»»åŠ¡, stack[n-1] = å½“å‰ä»»åŠ¡
     *
     * <p>å®ç°æ³¨æ„äº‹é¡¹ï¼š
     * <ul>
     *   <li>å¦‚æœæ— ä»»åŠ¡ï¼Œè¿”å›ç©ºåˆ—è¡¨ï¼ˆä¸è¿”å› nullï¼‰</li>
     *   <li>è¿”å›ä¸å¯å˜åˆ—è¡¨ï¼ˆé˜²æ­¢å¤–éƒ¨ä¿®æ”¹ï¼‰</li>
     *   <li>æ€§èƒ½ä¼˜åŒ–ï¼šç¼“å­˜ç»“æœï¼ˆå¦‚æœä»»åŠ¡æ ˆä¸å˜ï¼‰</li>
     * </ul>
     *
     * @return ä»»åŠ¡æ ˆåˆ—è¡¨ï¼Œä»æ ¹åˆ°å¶ï¼Œå¦‚æœæ— ä»»åŠ¡è¿”å›ç©ºåˆ—è¡¨
     * @since 4.0.0
     */
    default List<TaskNode> getTaskStack() {
        // é»˜è®¤å®ç°ï¼šé€’å½’æ„å»ºä»»åŠ¡æ ˆ
        List<TaskNode> stack = new ArrayList<>();
        TaskNode current = currentTask();
        while (current != null) {
            stack.add(0, current);  // å¤´éƒ¨æ’å…¥
            current = current.getParent();
        }
        return List.copyOf(stack);  // ä¸å¯å˜åˆ—è¡¨
    }
}
```

**è®¾è®¡è¯„åˆ†ï¼ˆè‡ªè¯„ï¼‰**:
| ç»´åº¦ | å¾—åˆ† | ç†ç”± |
|------|------|------|
| æ¥å£è®¾è®¡è´¨é‡ | 9/10 | default method ä¿è¯å…¼å®¹æ€§ï¼ŒJavaDoc å®Œæ•´ |
| å®ç°å®Œæ•´æ€§ | 9/10 | æä¾›é»˜è®¤å®ç°ï¼Œå­ç±»å¯ä¼˜åŒ– |
| å¼‚å¸¸å®‰å…¨ | 10/10 | clear() æ•è·æ‰€æœ‰å¼‚å¸¸ |
| æ€§èƒ½ä¼˜åŒ– | 8/10 | getTaskStack() å¯ä¼˜åŒ–ï¼ˆç¼“å­˜ï¼‰ï¼Œæ‰£ 2 åˆ† |
| ä»£ç å¯è¯»æ€§ | 10/10 | æ¸…æ™°æ³¨é‡Šï¼Œä½¿ç”¨ç¤ºä¾‹ |
| å‘åå…¼å®¹æ€§ | 10/10 | default methodï¼Œé›¶ç ´åæ€§ |

**å¹³å‡åˆ†**: 9.3/10 âœ…

---

### 2. TrackingProvider æ‰©å±•

```java
public interface TrackingProvider {

    // ========== ç°æœ‰æ–¹æ³• (v4.0.0-phase1) ==========
    void track(String name, Object obj, String... fields);
    List<ChangeRecord> getChanges();
    void clearAllTracking();
    default int priority() { return 0; }

    // ========== æ–°å¢æ–¹æ³• (v4.0.0-phase2) ==========

    /**
     * æ‰¹é‡è¿½è¸ªå¤šä¸ªå¯¹è±¡
     *
     * @param targets å¯¹è±¡æ˜ å°„ï¼ˆkey=å¯¹è±¡åç§°, value=å¯¹è±¡å®ä¾‹ï¼‰
     * @throws NullPointerException å¦‚æœ targets ä¸º null
     * @since 4.0.0
     */
    default void trackAll(Map<String, Object> targets) {
        if (targets == null) {
            throw new NullPointerException("targets cannot be null");
        }
        targets.forEach((name, obj) -> track(name, obj));
    }

    /**
     * æ·±åº¦è¿½è¸ªå¯¹è±¡ï¼ˆåŒ…æ‹¬åµŒå¥—å¯¹è±¡ï¼‰
     *
     * <p>ä¸ {@link #track} çš„åŒºåˆ«ï¼š
     * <ul>
     *   <li>track: ä»…è¿½è¸ªæ ‡é‡å­—æ®µï¼ˆString, int, Dateç­‰ï¼‰</li>
     *   <li>trackDeep: é€’å½’è¿½è¸ªåµŒå¥—å¯¹è±¡å­—æ®µ</li>
     * </ul>
     *
     * @param name å¯¹è±¡åç§°
     * @param obj è¦è¿½è¸ªçš„å¯¹è±¡
     * @since 4.0.0
     */
    default void trackDeep(String name, Object obj) {
        trackDeep(name, obj, null);
    }

    /**
     * æ·±åº¦è¿½è¸ªå¯¹è±¡ï¼ˆå¸¦é€‰é¡¹ï¼‰
     *
     * @param name å¯¹è±¡åç§°
     * @param obj è¦è¿½è¸ªçš„å¯¹è±¡
     * @param options è¿½è¸ªé€‰é¡¹ï¼ˆmaxDepth, ignoreFieldsç­‰ï¼‰ï¼Œnull ä½¿ç”¨é»˜è®¤
     * @since 4.0.0
     */
    default void trackDeep(String name, Object obj, TrackingOptions options) {
        // é»˜è®¤å®ç°ï¼šå›é€€åˆ°æµ…å±‚è¿½è¸ª
        track(name, obj);
    }

    /**
     * è·å–æ‰€æœ‰è¿½è¸ªä¼šè¯çš„å˜æ›´è®°å½•
     *
     * <p>ä¸ {@link #getChanges()} çš„åŒºåˆ«ï¼š
     * <ul>
     *   <li>getChanges: ä»…è¿”å›å½“å‰ä¼šè¯çš„å˜æ›´</li>
     *   <li>getAllChanges: è¿”å›æ‰€æœ‰ä¼šè¯çš„å˜æ›´</li>
     * </ul>
     *
     * @return æ‰€æœ‰å˜æ›´è®°å½•åˆ—è¡¨ï¼Œå¦‚æœæ— å˜æ›´è¿”å›ç©ºåˆ—è¡¨
     * @since 4.0.0
     */
    default List<ChangeRecord> getAllChanges() {
        // é»˜è®¤å®ç°ï¼šå›é€€åˆ°å½“å‰ä¼šè¯å˜æ›´
        return getChanges();
    }

    /**
     * å¼€å§‹ä¸€ä¸ªæ–°çš„è¿½è¸ªä¼šè¯
     *
     * <p>ç”¨é€”ï¼šéš”ç¦»ä¸åŒé˜¶æ®µçš„å˜æ›´è¿½è¸ª
     *
     * @param sessionName ä¼šè¯åç§°ï¼ˆç”¨äºåŒºåˆ†ï¼‰
     * @since 4.0.0
     */
    default void startTracking(String sessionName) {
        // é»˜è®¤å®ç°ï¼šæ— æ“ä½œï¼ˆä¸æ”¯æŒä¼šè¯éš”ç¦»ï¼‰
    }

    /**
     * æ‰‹åŠ¨è®°å½•ä¸€ä¸ªå˜æ›´
     *
     * <p>ç”¨é€”ï¼šè®°å½•éå¯¹è±¡å­—æ®µçš„å˜æ›´ï¼ˆå¦‚æ•°æ®åº“çŠ¶æ€ã€å¤–éƒ¨ç³»ç»Ÿè°ƒç”¨ï¼‰
     *
     * @param objectName å¯¹è±¡åç§°
     * @param fieldName å­—æ®µåç§°
     * @param oldValue æ—§å€¼
     * @param newValue æ–°å€¼
     * @param changeType å˜æ›´ç±»å‹ï¼ˆCREATE, UPDATE, DELETEï¼‰
     * @since 4.0.0
     */
    default void recordChange(String objectName, String fieldName,
                              Object oldValue, Object newValue,
                              ChangeType changeType) {
        // é»˜è®¤å®ç°ï¼šæ— æ“ä½œï¼ˆä¸æ”¯æŒæ‰‹åŠ¨è®°å½•ï¼‰
    }

    /**
     * æ¸…é™¤æŒ‡å®šä¼šè¯çš„è¿½è¸ªæ•°æ®
     *
     * @param sessionName ä¼šè¯åç§°
     * @since 4.0.0
     */
    default void clearTracking(String sessionName) {
        // é»˜è®¤å®ç°ï¼šå›é€€åˆ°æ¸…é™¤æ‰€æœ‰è¿½è¸ª
        clearAllTracking();
    }

    /**
     * åœ¨ä½œç”¨åŸŸå†…è¿½è¸ªå¯¹è±¡
     *
     * <p>å…¸å‹ç”¨æ³•ï¼š
     * <pre>{@code
     * User user = getUser();
     * provider.withTracked("user", user, () -> {
     *     user.setName("new name");
     *     // å…¶ä»–ä¿®æ”¹...
     * }, "name", "age");
     * // ä½œç”¨åŸŸç»“æŸåï¼Œè‡ªåŠ¨æ•è·å˜æ›´
     * }</pre>
     *
     * @param name å¯¹è±¡åç§°
     * @param obj è¦è¿½è¸ªçš„å¯¹è±¡
     * @param action è¦æ‰§è¡Œçš„æ“ä½œ
     * @param fields è¦è¿½è¸ªçš„å­—æ®µ
     * @since 4.0.0
     */
    default void withTracked(String name, Object obj, Runnable action, String... fields) {
        track(name, obj, fields);  // è¿½è¸ªåˆå§‹çŠ¶æ€
        try {
            if (action != null) {
                action.run();
            }
        } finally {
            // é‡æ–°è¿½è¸ªï¼ˆé€šè¿‡æ¯”è¾ƒæ•è·å˜æ›´ï¼‰
            // æ³¨æ„ï¼šé»˜è®¤å®ç°å¯èƒ½ä¸å®Œç¾ï¼Œå­ç±»åº”ä¼˜åŒ–
        }
    }
}
```

**è®¾è®¡è¯„åˆ†ï¼ˆè‡ªè¯„ï¼‰**:
| ç»´åº¦ | å¾—åˆ† | ç†ç”± |
|------|------|------|
| æ¥å£è®¾è®¡è´¨é‡ | 9/10 | æ–¹æ³•è¯­ä¹‰æ¸…æ™°ï¼ŒèŒè´£å•ä¸€ |
| å®ç°å®Œæ•´æ€§ | 8/10 | éƒ¨åˆ†é»˜è®¤å®ç°ä¸å®Œç¾ï¼ˆwithTrackedï¼‰ï¼Œæ‰£ 2 åˆ† |
| å¼‚å¸¸å®‰å…¨ | 9/10 | trackAll æœ‰ null æ£€æŸ¥ï¼ŒwithTracked éœ€ä¼˜åŒ– |
| æ€§èƒ½ä¼˜åŒ– | 8/10 | trackAll å¯æ‰¹é‡ä¼˜åŒ–ï¼Œæ‰£ 2 åˆ† |
| ä»£ç å¯è¯»æ€§ | 10/10 | JavaDoc å®Œæ•´ï¼Œç¤ºä¾‹æ¸…æ™° |
| å‘åå…¼å®¹æ€§ | 10/10 | å…¨éƒ¨ default method |

**å¹³å‡åˆ†**: 9.0/10 âœ…

**å¾…ä¼˜åŒ–é¡¹**:
1. withTracked() çš„é»˜è®¤å®ç°ä¸å®Œç¾ â†’ éœ€è¦åœ¨ Spring é€‚é…å™¨ä¼˜åŒ–
2. trackAll() å¯ä»¥æ‰¹é‡ä¼˜åŒ– â†’ è®°å½•ä¸ºæ€§èƒ½ TODO

---

### 3. ExportProvider æ–°å»ºæ¥å£

```java
package com.syy.taskflowinsight.spi;

import com.syy.taskflowinsight.model.Session;
import java.util.Map;

/**
 * å¯¼å‡ºæœåŠ¡æä¾›æ¥å£ï¼ˆSPIï¼‰
 *
 * <p>æä¾›ä¼šè¯æ•°æ®å¯¼å‡ºèƒ½åŠ›ï¼ˆæ§åˆ¶å°ã€JSONã€Mapç­‰æ ¼å¼ï¼‰
 *
 * <p>ä¼˜å…ˆçº§è§„åˆ™ï¼š
 * <ul>
 *   <li>Spring Beanï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</li>
 *   <li>æ‰‹åŠ¨æ³¨å†Œï¼ˆTFI.registerExportProviderï¼‰</li>
 *   <li>ServiceLoaderå‘ç°ï¼ˆMETA-INF/servicesï¼‰</li>
 *   <li>å…œåº•å®ç°ï¼ˆè¿”å›ç©ºå­—ç¬¦ä¸²/ç©ºMapï¼‰</li>
 * </ul>
 *
 * @author TaskFlow Insight Team
 * @since 4.0.0
 */
public interface ExportProvider {

    /**
     * å¯¼å‡ºå½“å‰ä¼šè¯åˆ°æ§åˆ¶å°
     *
     * <p>é»˜è®¤æ ¼å¼ï¼šæ–‡æœ¬æ ‘å½¢ç»“æ„ï¼Œä¸æ˜¾ç¤ºæ—¶é—´æˆ³
     *
     * @since 4.0.0
     */
    default void exportToConsole() {
        exportToConsole(false);
    }

    /**
     * å¯¼å‡ºå½“å‰ä¼šè¯åˆ°æ§åˆ¶å°ï¼ˆå¯é€‰æ—¶é—´æˆ³ï¼‰
     *
     * @param showTimestamp æ˜¯å¦æ˜¾ç¤ºæ—¶é—´æˆ³
     * @return æ˜¯å¦å¯¼å‡ºæˆåŠŸï¼ˆæ— ä¼šè¯è¿”å› falseï¼‰
     * @since 4.0.0
     */
    boolean exportToConsole(boolean showTimestamp);

    /**
     * å¯¼å‡ºå½“å‰ä¼šè¯ä¸º JSON å­—ç¬¦ä¸²
     *
     * @return JSON å­—ç¬¦ä¸²ï¼Œå¦‚æœæ— ä¼šè¯è¿”å› "{}"
     * @since 4.0.0
     */
    String exportToJson();

    /**
     * å¯¼å‡ºå½“å‰ä¼šè¯ä¸º Map ç»“æ„
     *
     * <p>Map ç»“æ„ï¼š
     * <pre>{@code
     * {
     *   "sessionId": "...",
     *   "sessionName": "...",
     *   "tasks": [
     *     {
     *       "taskId": "...",
     *       "taskName": "...",
     *       "messages": [...]
     *     }
     *   ],
     *   "changes": [...]
     * }
     * }</pre>
     *
     * @return Map ç»“æ„ï¼Œå¦‚æœæ— ä¼šè¯è¿”å›ç©º Map
     * @since 4.0.0
     */
    Map<String, Object> exportToMap();

    /**
     * Providerä¼˜å…ˆçº§ï¼ˆæ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
     *
     * @return ä¼˜å…ˆçº§å€¼ï¼Œé»˜è®¤0
     */
    default int priority() {
        return 0;
    }
}
```

**è®¾è®¡è¯„åˆ†ï¼ˆè‡ªè¯„ï¼‰**:
| ç»´åº¦ | å¾—åˆ† | ç†ç”± |
|------|------|------|
| æ¥å£è®¾è®¡è´¨é‡ | 10/10 | æ¸…æ™°çš„èŒè´£ï¼Œç»Ÿä¸€çš„å¯¼å‡ºæŠ½è±¡ |
| å®ç°å®Œæ•´æ€§ | 10/10 | è¦†ç›–æ‰€æœ‰å¯¼å‡ºåœºæ™¯ |
| å¼‚å¸¸å®‰å…¨ | 9/10 | exportToConsole è¿”å› boolean å¤„ç†å¤±è´¥ |
| æ€§èƒ½ä¼˜åŒ– | 9/10 | æ— æ€§èƒ½ç“¶é¢ˆ |
| ä»£ç å¯è¯»æ€§ | 10/10 | JavaDoc å®Œæ•´ï¼ŒMap ç»“æ„ç¤ºä¾‹æ¸…æ™° |
| å‘åå…¼å®¹æ€§ | 10/10 | æ–°æ¥å£ï¼Œæ— å…¼å®¹æ€§é—®é¢˜ |

**å¹³å‡åˆ†**: 9.7/10 âœ…

---

## ğŸ¯ æ€»ä½“è®¾è®¡è¯„åˆ†

| æ¥å£ | å¹³å‡åˆ† | çŠ¶æ€ |
|------|--------|------|
| FlowProvider æ‰©å±• | 9.3/10 | âœ… é€šè¿‡ |
| TrackingProvider æ‰©å±• | 9.0/10 | âœ… é€šè¿‡ |
| ExportProvider æ–°å»º | 9.7/10 | âœ… é€šè¿‡ |

**æ€»ä½“å¹³å‡åˆ†**: **9.3/10** âœ…

---

## ğŸ”„ è¿­ä»£æ”¹è¿›è®¡åˆ’

### éœ€è¦ä¼˜åŒ–çš„ç‚¹
1. **FlowProvider.getTaskStack() æ€§èƒ½** (æ‰£ 2 åˆ†)
   - é—®é¢˜ï¼šæ¯æ¬¡è°ƒç”¨éƒ½é‡æ–°æ„å»ºåˆ—è¡¨
   - ä¼˜åŒ–ï¼šåœ¨ Spring é€‚é…å™¨ä¸­ç¼“å­˜ç»“æœ
   - è§¦å‘æ¡ä»¶ï¼šä»»åŠ¡æ ˆå˜æ›´æ—¶å¤±æ•ˆç¼“å­˜

2. **TrackingProvider.withTracked() é»˜è®¤å®ç°** (æ‰£ 2 åˆ†)
   - é—®é¢˜ï¼šé»˜è®¤å®ç°æ— æ³•æ­£ç¡®æ•è·å˜æ›´
   - ä¼˜åŒ–ï¼šåœ¨ Spring é€‚é…å™¨ä¸­å®ç°å®Œæ•´é€»è¾‘
   - è®¾è®¡ï¼šä½¿ç”¨å¿«ç…§å‰åæ¯”å¯¹

3. **TrackingProvider.trackAll() æ‰¹é‡ä¼˜åŒ–** (æ‰£ 2 åˆ†)
   - é—®é¢˜ï¼šé€ä¸ªè°ƒç”¨ track()ï¼Œæ— æ‰¹é‡ä¼˜åŒ–
   - ä¼˜åŒ–ï¼šåœ¨ Spring é€‚é…å™¨ä¸­æ‰¹é‡å¿«ç…§
   - æ€§èƒ½æå‡ï¼šå‡å°‘ N æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ â†’ 1 æ¬¡

---

## ğŸ“‹ åç»­ä»»åŠ¡

1. âœ… æ¥å£è®¾è®¡ - å·²å®Œæˆ
2. â­ï¸ å®ç° Default Providers
3. â­ï¸ å®ç° Spring Adaptersï¼ˆå«æ€§èƒ½ä¼˜åŒ–ï¼‰
4. â­ï¸ è·¯ç”± TFI æ–¹æ³•
5. â­ï¸ ç¼–å†™æµ‹è¯•
6. â­ï¸ è¿è¡Œæµ‹è¯•å¥—ä»¶

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**è¯„å®¡çŠ¶æ€**: ç­‰å¾…å®ç°éªŒè¯
**è´¨é‡ç›®æ ‡**: â‰¥9.5/10 (å½“å‰ 9.3/10ï¼Œæ¥è¿‘ç›®æ ‡)
